$sprites: sprite-map("mobile/icons/*.png");
$sprites2x: sprite-map("mobile/icons2x/*.png");

@mixin retina-sprite($name, $sprites, $sprites2x, $dimensions: true, $pad: 0) {
  @if $dimensions == true {
    sprite-dimensions: ($sprites, $name);
  }

  background-image: sprite-url($sprites);
  background-position: sprite-position($sprites, $name, -$pad, -$pad);
  background-repeat: no-repeat;

  @if $pad > 0 {
    padding: $pad;
  }

  @media (-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 1.5) {
    & {
      $pos: sprite-position($sprites2x, $name, -$pad*2, -$pad*2);
      background-image: sprite-url($sprites2x);
      background-position: nth($pos, 1) nth($pos, 2)/2;
      background-size: (ceil(image-width(sprite-path($sprites2x)) / 2), auto); 
    }
  }
}  

@mixin sprite($name) {
  @include retina-sprite($name, $sprites, $sprites2x);
}
